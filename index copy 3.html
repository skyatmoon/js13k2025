<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Cat Underwork</title><style>body{margin:0;padding:0;overflow:hidden;background:#fff;color:#000;font-family:Arial,sans-serif}.startPage{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.gameTitle{font-size:48px;margin-bottom:40px;color:#000;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.startPageButton{padding:15px 30px;font-size:24px;background:#000;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:all .3s ease}.startPageButton:hover{background:#333;transform:scale(1.05)}.fishBackground{position:fixed;top:0;left:0;width:100%;height:100%;z-index:100;pointer-events:none}.fish{position:absolute;width:25px;height:15px;background:#000;border-radius:50% 50% 50% 50%/60% 60% 40% 40%}.fish::before{content:'';position:absolute;right:-8px;top:50%;transform:translateY(-50%);width:10px;height:12px;background:#000;border-radius:50% 0 0 50%}.fish::after{content:'';position:absolute;left:-3px;top:50%;transform:translateY(-50%);width:5px;height:5px;background:#000;border-radius:50%}.editorContainer{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;display:none;flex-direction:column;align-items:center;justify-content:center;z-index:900}.characterEditor{display:grid;grid-template-columns:repeat(5,30px);grid-template-rows:repeat(5,30px);gap:2px;margin-bottom:30px}.editorCell{width:30px;height:30px;background:#ddd;border:1px solid #999;cursor:pointer;transition:background-color .2s}.editorCell.active{background:#000}.editorTitle{font-size:32px;margin-bottom:30px;color:#000}.editorControls{display:flex;gap:20px;margin-top:20px}.editorButton{padding:10px 20px;font-size:18px;background:#000;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:all .3s ease}.editorButton:hover{background:#333;transform:scale(1.05)}.gameContainer{position:fixed;top:0;left:0;width:100%;height:100%;display:none;opacity:0;transition:opacity .5s ease}.gameContainer.show{display:block;opacity:1}canvas{display:block;width:100%;height:100%;background:#000}</style></head><body><div class="startPage"><h1 class="gameTitle">Cat Underwork</h1><button class="startPageButton">开始游戏</button><div class="fishBackground"></div></div><div class="editorContainer"><h2 class="editorTitle">创建你的角色</h2><div class="characterEditor"></div><div class="editorControls"><button class="editorButton" id="startGameBtn">开始游戏</button></div></div><div class="gameContainer"><canvas id="gameCanvas"></canvas></div><script>const startPage=document.querySelector('.startPage'),startPageButton=document.querySelector('.startPageButton'),editorContainer=document.querySelector('.editorContainer'),characterEditor=document.querySelector('.characterEditor'),startGameBtn=document.getElementById('startGameBtn'),gameContainer=document.querySelector('.gameContainer'),canvas=document.getElementById('gameCanvas'),fishBackground=document.querySelector('.fishBackground');canvas.width=window.innerWidth,canvas.height=window.innerHeight;const ctx=canvas.getContext('2d'),GRID_SIZE=5,CELL_SIZE=50,PLAYER_SIZE=GRID_SIZE*CELL_SIZE,player={x:0,y:0,characterPattern:Array(GRID_SIZE*GRID_SIZE).fill(!1)};let fishArray=[],hook={x:0,y:0,isFishing:!1,angle:Math.PI/2,speed:3},score=0,gameLoopId=null;function initEditor(){characterEditor.innerHTML='';const defaultPattern=[!1,!1,!0,!1,!1,!1,!0,!0,!0,!1,!0,!0,!0,!0,!0,!1,!0,!1,!1,!1,!1,!0,!1,!1,!1];player.characterPattern=[...defaultPattern];for(let i=0;i<GRID_SIZE*GRID_SIZE;i++){const cell=document.createElement('div');cell.classList.add('editorCell'),cell.dataset.index=i,player.characterPattern[i]&&cell.classList.add('active'),cell.addEventListener('click',()=>{const index=parseInt(cell.dataset.index);player.characterPattern[index]=!player.characterPattern[index],cell.classList.toggle('active',player.characterPattern[index])}),characterEditor.appendChild(cell)}}function createFishBackground(){fishBackground.innerHTML='';const fishCount=Math.floor(6*Math.random())+10;for(let i=0;i<fishCount;i++){const fish=document.createElement('div');fish.classList.add('fish');const startX=100*Math.random(),startY=100*Math.random();fish.style.left=`${startX}%`,fish.style.top=`${startY}%`,fish.style.animation='none',fish.style.transform=Math.random()>.5?'scaleX(-1)':'scaleX(1)',fishBackground.appendChild(fish),animateFish(fish)}}function animateFish(fish){let posX=parseFloat(fish.style.left),posY=parseFloat(fish.style.top);let speedX=.5*(Math.random()-.5),speedY=.2*(Math.random()-.5);function move(){posX+=speedX,posY+=speedY,posX<-5?(posX=-5,speedX=Math.abs(speedX),fish.style.transform='scaleX(1)'):posX>105&&(posX=105,speedX=-Math.abs(speedX),fish.style.transform='scaleX(-1)'),0>posY||posY>100&&(speedY=-speedY),Math.random()<.005&&(speedX=.5*(Math.random()-.5),fish.style.transform=speedX>0?'scaleX(1)':'scaleX(-1)'),Math.random()<.01&&(speedY=.2*(Math.random()-.5)),fish.style.left=`${posX}%`,fish.style.top=`${posY}%`,fish.parentElement&&requestAnimationFrame(move)}move()}function showEditor(){startPage.style.display='none',editorContainer.style.display='flex',gameContainer.classList.remove('show'),initEditor()}function createFish(){fishArray=[];const fishCount=Math.floor(10*Math.random())+15;for(let i=0;i<fishCount;i++){const size=3*Math.random()+1,value=Math.floor(10*size);fishArray.push({x:25+Math.random()*(canvas.width-50),y:canvas.height*.6+Math.random()*canvas.height*.3,size:15*size,value:value,speedX:2*(Math.random()-.5),speedY:Math.random()-.5,color:`rgba(${Math.floor(50*Math.random())},${Math.floor(50*Math.random())},${Math.floor(50*Math.random())},1)`})}}function startGame(){editorContainer.style.display='none',gameContainer.classList.add('show'),score=0,hook.x=canvas.width/2,hook.y=canvas.height*.2,hook.isFishing=!1,hook.angle=Math.PI/2,createFish(),gameLoopId&&clearInterval(gameLoopId),gameLoop(),gameLoopId=setInterval(gameLoop,16)}function gameLoop(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.fillStyle='#fff',ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle='#ddd',ctx.fillRect(0,canvas.height*.6,canvas.width,canvas.height*.4),ctx.fillStyle='#aaa',ctx.fillRect(0,canvas.height*.6,canvas.width,10),drawPlayer(),drawHook(),drawFish(),drawScore(),drawReturnHint(),updateHook(),updateFish(),checkCollisions()}function drawPlayer(){const centerX=canvas.width/2-PLAYER_SIZE/2,centerY=canvas.height*.1;ctx.fillStyle='#000';for(let i=0;i<GRID_SIZE*GRID_SIZE;i++)player.characterPattern[i]&&(ctx.fillRect(centerX+CELL_SIZE*(i%GRID_SIZE),centerY+CELL_SIZE*Math.floor(i/GRID_SIZE),CELL_SIZE,CELL_SIZE)),ctx.strokeStyle='#000',ctx.lineWidth=3,ctx.beginPath(),ctx.moveTo(canvas.width/2,canvas.height*.1+PLAYER_SIZE),ctx.lineTo(hook.x,hook.y),ctx.stroke()}function drawHook(){ctx.fillStyle='#666',ctx.beginPath(),ctx.arc(hook.x,hook.y,5,0,2*Math.PI),ctx.fill(),ctx.strokeStyle='#333',ctx.lineWidth=2,ctx.beginPath(),ctx.moveTo(hook.x,hook.y+5),ctx.lineTo(hook.x-5,hook.y+10),ctx.stroke()}function drawFish(){fishArray.forEach(fish=>{ctx.fillStyle=fish.color,ctx.beginPath(),ctx.ellipse(fish.x,fish.y,fish.size,fish.size*.6,0,0,2*Math.PI),ctx.fill(),ctx.beginPath(),fish.speedX>0?(ctx.moveTo(fish.x-fish.size,fish.y-fish.size*.4),ctx.lineTo(fish.x-fish.size*1.5,fish.y),ctx.lineTo(fish.x-fish.size,fish.y+fish.size*.4)):(ctx.moveTo(fish.x+fish.size,fish.y-fish.size*.4),ctx.lineTo(fish.x+fish.size*1.5,fish.y),ctx.lineTo(fish.x+fish.size,fish.y+fish.size*.4)),ctx.fill(),ctx.fillStyle='#fff',fish.speedX>0?(ctx.beginPath(),ctx.arc(fish.x+fish.size*.5,fish.y,fish.size*.2,0,2*Math.PI),ctx.fill()):(ctx.beginPath(),ctx.arc(fish.x-fish.size*.5,fish.y,fish.size*.2,0,2*Math.PI),ctx.fill())})}function drawScore(){ctx.font='24px Arial',ctx.fillStyle='#000',ctx.fillText(`分数: ${score}`,20,40)}function drawReturnHint(){ctx.font='20px Arial',ctx.fillStyle='#000',ctx.fillText('按ESC返回首页 | 点击屏幕钓鱼',20,70)}function updateHook(){if(hook.isFishing){hook.x=canvas.width/2+Math.cos(hook.angle)*(hook.y-canvas.height*.1-PLAYER_SIZE),hook.y+=hook.speed,hook.y>canvas.height*.95&&(hook.isFishing=!1)}else hook.y>canvas.height*.2?(hook.y-=hook.speed*1.5,hook.x=canvas.width/2+Math.cos(hook.angle)*(hook.y-canvas.height*.1-PLAYER_SIZE)):(hook.y=canvas.height*.2,hook.x=canvas.width/2)}function updateFish(){fishArray.forEach(fish=>{(fish.x+=fish.speedX)<fish.size||fish.x>canvas.width-fish.size&&(fish.speedX=-fish.speedX),(fish.y+=fish.speedY)<canvas.height*.6+fish.size||fish.y>canvas.height-fish.size&&(fish.speedY=-fish.speedY)})}function checkCollisions(){if(hook.isFishing)for(let i=0;i<fishArray.length;i++){const fish=fishArray[i],dx=hook.x-fish.x,dy=hook.y-fish.y,distance=Math.sqrt(dx*dx+dy*dy);if(distance<fish.size+5){score+=fish.value,fishArray.splice(i,1),hook.isFishing=!1,fishArray.length<5&&createFish();break}}}startPageButton.addEventListener('click',showEditor),startGameBtn.addEventListener('click',startGame),window.addEventListener('keydown',e=>{'Escape'===e.key&&gameContainer.classList.contains('show')&&(gameContainer.classList.remove('show'),startPage.style.display='flex',gameLoopId&&(clearInterval(gameLoopId),gameLoopId=null),createFishBackground())}),canvas.addEventListener('click',()=>{gameContainer.classList.contains('show')&&!hook.isFishing&&hook.y<=canvas.height*.2+5&&(hook.isFishing=!0,hook.angle=Math.PI/2+.25*Math.PI*(Math.random()-.5))}),window.addEventListener('resize',()=>{const oldWidth=canvas.width,oldHeight=canvas.height;canvas.width=window.innerWidth,canvas.height=window.innerHeight;if(gameContainer.classList.contains('show')){const scaleX=canvas.width/oldWidth,scaleY=canvas.height/oldHeight;fishArray.forEach(fish=>(fish.x*=scaleX,fish.y*=scaleY)),hook.x*=scaleX,hook.y*=scaleY}}),createFishBackground();</script></body></html>